(()=>{InitDropdown=function(){$(this).dropdown()},$(document).on("mouseover",".dropdownmenu",InitDropdown),ShowNotification=function(t,n,e,i,a,o){if("undefined"!=typeof toastr){var d;toastr.clear(d);var s=5e3,l=1e3,r=null,c=null;void 0!==i&&""!=i&&(r=function(){window.location=i}),"info"==e&&(c=function(){$("#toast-container").addClass("info")}),void 0===a||a||(s=0,l=0),void 0===o&&(o=!0),toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-bottom-right",preventDuplicates:!0,showDuration:"300",hideDuration:"1000",timeOut:s,extendedTimeOut:l,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",toastClass:"toastr",tapToDismiss:o,onclick:r,onShown:c},d=toastr[e](n,t)}},InitAppActionMenu=function(){var t=$("[data-actionmid]");(!isEditPage()||"undefined"==typeof vjEditorSettings)&&t.length>0&&t.each((function(){var t=$(this).data("actionmid");$(".DnnModule-"+t).vjModuleActions({AppMenus:jQuery.parseJSON($(this).html()),mid:t})}))},isEditPage=function(){var t;return"undefined"!=typeof getCookie&&(t=getCookie("vj_InitUX")),null!=t&&""!=t&&"false"!=t},DestroyAppActionMenu=function(){$("[data-actionmid]").each((function(){$("#moduleActions-"+$(this).data("actionmid")).remove()}))},GetParameterByName=function(t,n){var e=RegExp("/"+t+"/([^/]*)","i").exec(n);return""!=e&&null!=e&&null!=e||(e=RegExp(t+"=([^&]*)","i").exec(n)),e&&decodeURIComponent(e[1].replace(/\+/g," "))},GetPopupURL=function(t,n){return null!=t&&-1!=t.indexOf("?")?t+n.replace("?",""):t+n},ClosePopUp=function(t){void 0!==t&&t?$(".uxmanager-modal").find('[data-bs-dismiss="modal"]').click():$(".uxmanager-modal").last().find('[data-bs-dismiss="modal"]').click()},RedirectPopup=function(t){var n=t.contentWindow.location.href;-1==n.indexOf("ctl")&&-1==n.indexOf("icp")?ClosePopUp():n.indexOf("ctl/module/moduleid")>0&&$(t).contents().find(".dnnAdminTabNav li:last>a").click()},OpenPopUp=function(t,n,e,i,a,o,d,s,l,r,c,u,m,f){var p,h="vjModal"+(new Date).getTime(),v="",g="",w="",b=' style="',y=!0,x="",k="";void 0!==r&&(p=r?"yes":"no"),void 0===c&&(c=""),void 0===d&&(d=!1),"100%"==n?(g="fullwidth",void 0===r&&(p="yes"),b+="width: 100%;"):b+="width:"+n+"px;",void 0!==f&&f&&(x='<div class="video-wrapper">',k="</div>"),void 0!==o&&null!=o&&""!=o&&"100%"!=o?b+="height:"+o+"px;":w+=" fullheight","100%"!=n&&"right"==e&&(w+=" modal-right"),void 0!==l&&null!=l&&(v='data-edit="edit_module" data-mid="'+l+'"'),' style="'==b?b="":b+='"',void 0===m||m||(y=!1);var M='<div id="'+h+'"  class="uxmanager-modal modal fade '+g+'" data-bs-focus="false" data-bs-backdrop="static" data-bs-keyboard="'+y+'" tabindex="-1" '+v+' role="dialog" aria-labelledby="defaultModalLabel" aria-hidden="true">\n        <div class="modal-dialog'+w+'"'+b+'>\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h4 class="modal-title '+c+'" id="defaultModalLabel"></h4>\n                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>\n                </div>\n                <div class="modal-body" id="UXRender">\n                    '+x+'\n                    <img class="loader" alt="Loading" src="/DesktopModules/Vanjaro/UXManager/Library/Resources/Images/loading.svg" />\n                    <iframe id="UXpagerender" scrolling="'+p+'" onload="RedirectPopup(this);"></iframe>\n                    '+k+"\n                </div>\n            </div>\n        </div>\n    </div>";void 0!==s&&s&&$("body div[id*='vjModal'], .modal-backdrop").remove(),$("body").find("#"+h).length<=0&&$("body").append(M);var C=$("#"+h);if(""!=a&&C.find("#UXpagerender").on("load",(function(){var t=$(this);t.prev().hide(),t.show()})),void 0===m||m||C.find(".btn-close").hide(),"right"==e&&d?(0==C.find(".modal-toggle").length&&C.append('<button type="button" class="modal-toggle" style="right: '+(n-1)+'px;"><em class="fas fa-chevron-right"></em></a>'),C.find(".modal-toggle").click((function(){var t=$(this),n=C.find(".modal-dialog").width();0==parseInt(t.css("right"))?(t.animate({right:n-1},"slow").removeClass("modalclosebtn"),C.find(".modal-dialog").animate({right:"0"},"slow",(function(){t.find("em").addClass("fa-chevron-right").removeClass("fa-chevron-left"),C.removeClass("modal-close").addClass("modal-open").css("width","100%"),$(".modal-backdrop").removeClass("hide").addClass("show").css("width","100vw"),$(".gjs-cv-canvas__frames").css("pointer-events","all")}))):(t.animate({right:"0"},"slow").addClass("modalclosebtn"),C.find(".modal-dialog").animate({right:"-"+n},"slow",(function(){t.find("em").addClass("fa-chevron-left").removeClass("fa-chevron-right"),C.addClass("modal-close").removeClass("modal-open"),$(".modal-backdrop").removeClass("show").addClass("hide").css("width","0"),$(".gjs-cv-canvas__frames").css("pointer-events","none")})))}))):C.find(".modal-toggle").remove(),""!=a){var j=window.parent.$("#iframe").attr("src");if(a.startsWith("~"))a=a.replace("~","");else if(a.startsWith("http")){var A=a.split("#");a=-1==A[0].indexOf("?")?A[0]+"?v="+(new Date).getTime():A[0]+"&v="+(new Date).getTime(),null!=A[1]&&(a=a+"#"+A[1])}else"about:blank"!==j&&(j=-1==j.indexOf("?")?j+"?v="+(new Date).getTime():j+"&v="+(new Date).getTime(),a=j+a)}C.find("#defaultModalLabel").text(i),C.modal();var I=C.prev(".modal-backdrop");if(I.length&&I.prev('div[id*="vjModal"]').length){var U=parseInt(I.prev('div[id*="vjModal"]').css("z-index"));C.css("z-index",U+2),C.next(".modal-backdrop").css("z-index",U+1)}return window.document.callbacktype="",C.on("hidden.bs.modal",(function(t){if(""!=a){if(C.find("#UXpagerender").attr("src","about:blank"),"update"===window.document.callbacktype){var n=window.parent.$("#iframe");void 0!==n[0]&&null!=n&&(n[0].src=n[0].src)}var e="#dnn_vj_"+$(window.document.body).find(".uxmanager-modal").data("mid"),i=$(".gjs-frame").contents().find(e).find("#Appframe");i.length&&i.prev().hide()}C.remove()})),C.on("shown.bs.modal",(function(t){$(document).off("focusin.modal")})),""!=a&&C.find("#UXpagerender").attr("src",a),C.modal("show"),void 0!==u&&$("body").find(".modal-backdrop").css("opacity",u),$(window.parent.document.body).find('[data-bs-dismiss="modal"]').on("click",(function(t,n){if("edit_module"==$(window.document.body).find(".uxmanager-modal").data("edit")&&(1==$(window.parent.document.body).find(".uxmanager-modal").length||void 0!==n&&n)){var e=$(window.document.body).find(".uxmanager-modal").data("mid");if($(".gjs-frame").contents().find("#dnn_vj_"+e).length>0){var i=CurrentTabUrl;i=-1==i.indexOf("?")?i+"?mid="+e+"&icp=true":i+"&mid="+e+"&icp=true",$(".gjs-frame").contents().find("#dnn_vj_"+e).html('<img class="centerloader moduleloader" src=\'/DesktopModules/Vanjaro/UXManager/Library/Resources/Images/loading.svg\'><iframe id="Appframe" scrolling="no" onload="window.parent.RenderApp(this);" src=\''+i+'\' style="width:100%;height:auto;"></iframe>')}else void 0!==n&&!n||""!=x||window.parent.location.reload()}})),null!=t&&null!=t.stopImmediatePropagation&&t.stopImmediatePropagation(),!1},$(document).keyup((function(t){if(27==(t.keyCode||t.which)&&$('[ng-show=ShowFileManager]:not(".ng-hide")').length<=0){var n=$(".uxmanager-modal");n.length<=0&&(n=$(window.parent.document.body).find(".uxmanager-modal")),n.length>0&&n.find('[data-bs-dismiss="modal"]').click()}})),OpenImagePopup=function(t){if(null==window.parent.VjEditor||null==window.parent.VjEditor||null!=window.parent.VjEditor&&window.parent.VjEditor.getComponents().length<=0){var n=$(t),e="";void 0!==n.attr("title")&&(e=n.attr("title"));var i=$("body").find("#ImgModal");i.css({"max-height":"100%",height:"auto"}),i.find(".modal-title").text("").text(e);var a=n.attr("src");void 0!==n.attr("data-src")&&(a=n.attr("data-src")),i.find("img").attr("src",a);var o=new bootstrap.Modal(document.getElementById("ImgModal"));windowWidth=$(window).width(),windowHeight=$(window).height(),windowWidth>992&&((t=new Image).addEventListener("load",(function(){var t=this.naturalWidth,n=this.naturalHeight;if(n>windowHeight-200){var e=windowHeight-200,a=t/n*e;i.find(".modal-dialog").css("max-width",a).find(".modal-content").css("max-height",e+100).find(".modal-body").css("max-height",e+100).find("img").css("max-height",e)}else i.find(".modal-dialog").css("max-width",t).find(".modal-content").css("max-height",n+100).find(".modal-body").css("max-height",n+100).find("img").css("max-height",n);o.show()})),t.src=a)}},$(document).ready((function(){$(".vj-image-gallery-item").on("click",(function(t){$(this).parents("a").length||void 0!==$(this).attr("onclick")||OpenImagePopup(this)})),$(".navbar li.dropdown").hover((function(){if(!($(window).width()<767)){var t=$(this),n=$(this).find("> ul.dropdown-menu"),e=$(window).width(),i=t.width(),a=n.width();n.offset().left+n.width()>e?(n.css("margin-left","-"+(a-i+10)+"px"),n.css("border-radius","0")):n.css("margin-left","2px")}})),$(".navbar li.dropdown-submenu").hover((function(){if(!($(window).width()<767)){var t=$(this).find("ul.dropdown-menu");if(t.get(0)){var n=$(window).width(),e=t.width(),i=$(this).parent().width();t.offset().left+t.width()>n?t.css("margin-left","-"+(i+e+10)+"px"):t.css("margin-left",0)}}})),$("body").find(".vj-image-gallery").length&&$("body").append('\n\t\t<div class="modal fade" id="ImgModal">\n\t\t\t<div class="modal-dialog">\n\t\t\t\t<div class="modal-content">\n\t\t\t\t\t<div class ="modal-header">\n\t\t\t\t\t\t<h4 class="modal-title"><span class="d-none">Heading</span></h4>\n\t\t\t\t\t\t<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="modal-body">\n\t\t\t\t\t\t<img class="img-fluid" alt="Img"  src=""/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t'),$('.uxmanager-modal [data-bs-dismiss="modal"]').on("click",(function(t){$("#UXpagerender").show().siblings().remove()})),$(".DefaultMenu").find("span.dropdown-toggle, span.dropdown-item, .dropdown svg").on("click",(function(t){return t.preventDefault(),$(window).width()>991||$(this).is("svg")&&$(this).parent("span").length||$(this).parents("li").first().toggleClass("resp-active"),this})),InitAppActionMenu(),jQuery(window).on("load",(function(){for(var t=document.getElementsByClassName("g-recaptcha-response"),n=0;n<t.length;n++)t[n].setAttribute("aria-hidden","true"),t[n].setAttribute("aria-label","do not use"),t[n].setAttribute("aria-readonly","true")}))})),InitHamburgerMenu=function(t){if(t.parent().find(".DefaultMenu").length){var n=t.parent().find(".DefaultMenu"),e=t.offset().top;$(n).appendTo("body"),$(n).css("top",e+30)}else{var i=(n=t).attr("data-bs-target");e=t.parent(),setTimeout((function(){$(i).appendTo(e),$(i).css("top","auto")}),500)}},$(window).resize((function(){$(window).width()>991&&$(".navbar-toggler").each((function(){if(!$(this).hasClass("collapsed")){var t=$(this);$(t).trigger("click");var n=t.attr("data-bs-target"),e=$(this).parent();$(n).appendTo(e),$(n).css("top","auto")}}))})),function(t){t.fn.vjModuleActions=function(n){var e=n.mid,i=n.AppMenus,a=i.length;function o(n){var e=t(".DnnModule-"+n),i=t("#moduleActions-"+n+" > ul"),a=e.offset(),o=e.width();i.length&&i.css({position:"absolute",marginLeft:0,marginTop:0,top:a.top+10,left:a.left+o-170,display:"none"})}var d=t("form#Form");if(0===d.find("div#moduleActions-"+e).length){d.append('<div id="moduleActions-'+e+'" class="actionMenu"><ul class="dnn_mact"></ul></div>');var s=d.find("div:last").find("ul");a>0&&function(t,n,i,a,o,d){for(var s=function(t,n,e,i){return t.append('<li class="'+e+"\"><a href='javascript:void(0)' aria-label=\""+n+'">'+i+"</a><ul></ul>"),t.find("li."+e+" > ul")}(t,"Edit","actionMenuEdit",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>'),l=0;l<d;l++){var r=o[l];if("~"!==r.Title){r.Url?r.Url=decodeURIComponent(r.Url):r.Url="javascript: __doPostBack('"+actionButton+"', '"+r.ID+"')";var c="<li class='managemenu'>";if("ModuleSettings.Action"===r.CommandName&&(c='<li id="moduleActions-'+e+'-Settings">'),"False"==r.NewWindow){var u="100%";r.Width&&(u=r.Width),-1==r.Url.indexOf("javascript:")?c+="<a onclick='OpenPopUp(null, \""+u+'", "right", "'+r.Title+'", "'+r.Url+'", "", "", "", '+r.ModuleId+");'>"+r.Title+"</a>":c+='<a onclick="'+r.Url.replace(/"/g,"'")+'">'+r.Title+"</a>"}else c+='<a href="'+r.Url+"\" target='_blank'>"+r.Title+"</a>";s.append(c)}}}(s,0,0,0,i,a),t(window).resize((function(){o(e)}))}return t("#moduleActions-"+e+" .dnn_mact > li").on({mouseover:function(){t("#moduleActions-"+e+" ul").css("display","block"),function(n){var e=n.parent(),i=t(window).height(),a=t(window).scrollTop(),o=e.offset().top-a<i/2,d=n.height();o?(n.prev().css({"border-radius":"5px 5px 0 0"}),n.css({top:30,right:1,"border-radius":"5px 0 5px 5px"}).show()):(n.prev().css({"border-radius":"0 0 5px 5px"}),n.css({top:-d,right:1,"border-radius":"5px 5px 0 5px"}).show())}(t(this).find("ul").first())}}).on({mouseout:function(){var n;t("#moduleActions-"+e+" ul").css("display","none"),t(this).find("> a").css("border-radius","100%"),n=t(this).find("ul").first(),t("#moduleActions-"+e+" ul.dnn_mact"),n&&n.position()&&(n.position().top,n.hide())}}),t(".DnnModule-"+e).on({mouseover:function(){o(e),t("#moduleActions-"+e+" ul").css("display","block"),t("#moduleActions-"+e+" ul.dnn_mact li ul").css("display","none")},mouseout:function(){t("#moduleActions-"+e+" ul").css("display","none")}}),this}}(jQuery);var t="";validateCaptcha=function(n,e,i){if("undefined"!=typeof grecaptcha){var a=$("#vjrecaptcha").data("sitekey"),o="vCaptchaResponse",d=document.getElementById(o);null!==d&&d.remove(),jQuery('<div id="'+o+'" name="'+o+'"></div>').insertBefore(n);var s=grecaptcha.render(o,{sitekey:a,size:"invisible",badge:"bottomright",callback:function(a){t=a,$(i).val(a),e(n)}});grecaptcha.execute(s)}else e(n)},$(document).on("ajaxSend",(function(n,e,i){e.setRequestHeader("vj-recaptcha",t)})),$.fn.dnnModuleActions=function(t){},"undefined"!=typeof dnn&&(dnn.ContentEditorManager={},dnn.ContentEditorManager.init=function(){})})();